# Copyright (c) 2019 Dmitry Arkhipov <grisumbras@gmail.com>
# Distributed under the MIT license (See accompanying file LICENSE)


import common ;
import make ;
import os ;
import testing ;


using sass ;


project m.sass-test
  : default-build
    <sass-style>expanded
    <sass-line-numbers>off
  ;


rule cmp ( result : test + ) {
  local name = $(result:S=) ;
  make $(name)
    : $(result)
      [ css $(name).helper : $(test) /m.sass//libs ]
    : @cmp.helper
    ;
}

CMP = cmp ;
if [ os.on-windows ] { CMP = echo n \| comp ; }

TOUCH = [ common.file-touch-command ] ;

actions cmp.helper {
  $(CMP) $(>) && $(TOUCH) $(<) ;
}


# cmp use-breakpoints.css : use-breakpoints.scss ;
# cmp use-grid.css : use-grid.scss ;
css grid.css : grid.scss /m.sass//libs ;
